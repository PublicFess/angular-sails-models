DOCTYPE(html="html")
html(ng-app="test-models")
  head(lang="ru")
    meta(charset="UTF-8")
    title Angular Models Test
    script(type="text/javascript" src="/static/js/angular/angular.min.js")
    script(type="text/javascript" src="/static/js/sails.io.js/dist/sails.io.js")
    script(type="text/javascript" src="/static/js/angular-sails/dist/angular-sails.min.js")
    script(type="text/javascript" src="/app.js")
  body(ng-controller='main')
    div.create_user
      input(ng-model='newUser.name')
      input(ng-model='newUser.age')
      input(ng-model='newUser.city')
      button(ng-click='createUser()') Create User
    div.save_user
      input(ng-model='updatingUser.name')
      input(ng-model='updatingUser.age')
      input(ng-model='updatingUser.city')
      button(ng-click='saveUser()') Save User
    div.create_address
      input(ng-model='newAddress.city')
      input(ng-model='newAddress.street')
      input(ng-model='newAddress.building')
      button(ng-click='createAddress()') Create Address
    div.save_address
      input(ng-model='updatingAddress.city')
      input(ng-model='updatingAddress.street')
      input(ng-model='updatingAddress.building')
      button(ng-click='saveAddress()') Save Address
    table.users
      tr(ng-repeat='user in users')
        td {{user.name}}
        td {{user.age}}
        td {{user.city}}
        td
          button.update_user(ng-click='updateUser(user)') Update User
        td
          button.change_city(ng-click='changeCity(user)') Change City
        td
          button.delete_user(ng-click='deleteUser(user)') Delete User
    
    table.addresses
      tr(ng-repeat='address in addresses')
        td {{address.city}}
        td {{address.street}}
        td {{address.building}}
        td
          button.update_user(ng-click='updateAddress(address)') Update Address
        td
          button.delete_user(ng-click='deleteAddress(address)') Delete Address
    
